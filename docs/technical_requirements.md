# Содержание
- [1. Цель проекта](#1-цель-проекта)
- [2. Описание системы](#2-описание-системы)
  - [2.1. Типы пользователей](#21-типы-пользователей)
  - [2.2. Сущности](#22-сущности)
    - [2.2.1. Администратор](#221-администратор)
    - [2.2.2. Сотрудник](#222-сотрудник)
    - [2.2.3. Клиент](#223-клиент)
    - [2.2.4. Товар](#224-товар)
    - [2.2.5. Коммерческое предложение](#225-коммерческое-предложение)
    - [2.2.6. Должность](#226-должность)    
  - [2.3. Регистрация](#22-регистрация)
  - [2.4 Аутентификация и авторизация](#23-аутентификация-и-авторизация)
  - [2.5. Функционал сотрудника](#24-функционал-сотрудника)
    - [2.5.1 Просмотр КП](#251-просмотр-кп)
    - [2.5.2. Создание КП](#252-создание-кп)
    - [2.5.3. Изменение КП](#253-изменение-кп)
    - [2.5.4. Удаление КП](#254-удаление-кп)
    - [2.5.5. Согласование КП с руководителем](#255-согласование-кп-с-руководителем)
    - [2.5.6. Отправка КП клиенту на почту](#256-отправка-кп-клиенту-на-почту)
    - [2.5.7. Просмотр информации о товарах](#257-просмотр-информации-о-товарах)
    - [2.5.8. Просмотр информации о клиентах](#258-просмотр-информации-о-клиентах)
  - [2.6. Админ панель для управления данными](#26-админ-панель-для-управления-данными)
  - [2.7. Функционал интеграции с облачным хранилищем](#27-функционал-интеграции-с-облачным-хранилищем)
  - [2.8. Аналитика](#28-аналитика)
  - [](#)



# 1. Цель проекта

Цель проекта - разработка системы для создания коммерческих предложений. Пользователь имеет возможность создавать документы коммерческих предложений(КП), используя данные из БД, а также дополнять их при необходимости. Документ генерируется в формате PDF. В системе должен быть предусмотрен механизм согласования КП с руководителем. В ИС должна быть предусмотрена возможность отправлять КП из приложения, а также автоматическое сохранение документа в облачном хранилище.


# 2. Описание системы

Система состоит из следующих функциональных блоков:
1. Аутентификация и авторизация
2. Функционал пользователя
3. Функционал руководителя
4. Админ. панель для управления данными (в т.ч. регистрация пользователей)
5. Функционал интеграции с облачным хранилищем
6. Аналитика (?)


## 2.1. Типы пользователей

В системе предусмотрено 2 типа пользователей:
1. Админ: управляет всеми данными в системе, может настраивать правила для согласования КП
2. Сотрудник: создает КП, отправляет их клиентам, может просматривать информацию о товарах, клиентах и выданых КП, а также согласует документы КП (если руководитель)


## 2.2. Сущности

В ИС используются следующие сущности:
- Администратор
- Сотрудник
- Клиент
- Товар
- Коммерческое предложение
- Должность


### 2.2.1. Администратор

**Администратр** - сущность, содержащая данные суперпользователя системы

Поля:
  - Логин (Электронная почта)
  - Пароль


### 2.2.2. Сотрудник

**Сотрудник** - сущность, содержащая данные о сотруднике компании.

Поля:
- ID
- Логин (Электронная почта)
- Пароль
- ФИО
- Код должности
- Телефон


### 2.2.3. Клиент

**Клиент** - сущность, содержащая информацию о клиентах компании.

Поля любого типа клиентов:
- ID
- Тип (физ. или юр. лицо)

Поля клиентов типа *частное лицо*:
- ФИО
- Телефон
- Электронная почта

Поля клиентов типа *юридическое лицо*:
- Название
- ИНН
- ОГРН
- Адрес
- Телефон
- Контактные лица (телефон + email) (Может быть больше 1-го)

### 2.2.4. Товар
**Товар** - сущность, содержащая информацию о товарах, которые продает компания.

Поля товара любого типа:
- ID
- Тип (автомобиль, доп.опция, аксессуар
- Cost (Закупочная цена)
- List Price (Цена по прейскуранту)

Поля для товара типа *автомобиль*:
- Модель
- Версия
- Комплектация

Поля для товара типа *доп.опция*:
- наименование

поля для товара типа *аксессуар*:
- наименование


### 2.2.5. Коммерческое предложение
**Коммерческое предложение** - сущность, содержащая информацию о коммерческом предложении: содержимом документа, а также дополнительную внутреннуюю информацию

Поля:
- Номер КП
- Статус
- Сотрудник, выдавший КП
- Дата и время обращения
- Дата и время ответа на запрос клиента
- Срок действия КП
- Комментарий к КП
- Внутренний Комментарий
- История изменений (кооментарии согласующего лица)
- Расположение на облак
- Клиент
- Список товаров
  - Информация о товаре
  - Скидка (?)
  - Количество
  - Цена за единицу
  - Итоговая цена без НДС
- Итоговая цена заказа без НДС
- Итоговая цена заказа с НДС


### 2.2.6. Должность

**Должность** - содержит информацию о должностях в компании.

Поля:
- Код должности
- Название должности
- Описание должности



## 2.3. Регистрация

Регистрацию всех сотрудников производит администратор через панель администратора.
Логин и пароль - корпоративная электронная почта и пароль от нее. Это требуется для отправки электронных писем из приложения.


## 2.4 Аутентификация и авторизация

Для аутентификации должен быть использован JWT-токен.

Авторизацию пользовател проходит через совою корпоративную почту и пароль от нее.


## 2.5. Функционал сотрудника

После прохождения аутентификации и авторазации, пользователь получает доступ к следующим функциональным блокам:
1. Просмотр КП
2. Создание КП
3. Изменение КП
4. Удаление КП
5. Согласование КП с руководителем
6. Отправка КП клиенту на почту
7. Просмотр информации о товарах
8. Просмотр информации о клиентах
9. Согласование документа КП


### 2.5.1. Просмотр КП

КП должны отображаться списком в котором должны присутствовать виджеты, позволяющие изменить, скачать или удалить КП.

При клике на КП, происходит перенаправление на страницу с детальной информацией о КП

Отображаются все поля коммерческого предложения см. 2.2.5. Сущности - Коммерческое предложение

Под информацией о КП должны быть кнопки скачать, изменить и удалить документ КП


### 2.5.2. Создание КП

Страница создания КП состоит из несокльких вкладок:
- Информация о КП и клиенте
- Список товаров
- Предпросмотр
- Согласование
- Закрытие документа

Вкладки содержат поля в соответствии с  2.2.5. Сущности - Коммерческое предложение

Виджет для создания КП должен быть доступен на всех страницах приложения, так как эта функция реализует цель ИС.

После заполнения всех полей КП может быть отправлено на согласование, в соответствии с матрицей согласования.
После согласования, КП либо закрывается, либо отправляется на доработку содтруднику. (про согласование см п. 2.5.5. Согласование КП с руководителем)

После согласования КП, можно скачать полученный документ и/или отправить его на почту клиенту.


### 2.5.3. Изменение КП

Интерфейс изменения КП совпадает с интерфейсом создания КП (п.2.5.2. Создание КП), однако в случае изменения все поля заполнены старыми данными

Перейти на страницу изменения КП, можно кликнув на соответствующий виджет в списке с документами КП, или кликнув на кнопку на странице просмотра данных КП


### 2.5.4. Удаление КП

Удалить КП, можно кликнув на соответствующий виджет в списке с документами КП, или кликнув на кнопку на странице просмотра данных КП

Перед удалением необходимо запросить подтверждение удаления

### 2.5.5. Согласование КП с руководителем

После завершения редактирования КП, программа должна определить уровень согласования. Это должно происходить в соответствии с матрицей согласования - набором условий, который администратор может задать через приложение. После определения уровня согласования, сотрудник может выбрать, кому на согласование отправить документ (по умолчанию сотрудник, который соответствует уровню согласования, однако можно выбрать сотрудника с более высокой должностью, если первый напр. находится в отпуске). Дале сотрудник может оставить свой комментарий. После завершения настройки параметров согласования, сотрудник нажимает на кнопку "Отправить на согласование", программа заполняет html шаблон письма и отправляет его на почту согласующему лицу.

Письмо должно содержать:
- Информацию о сотруднике, создавшем КП
- Всю информацию, содержащуюся в КП
- Комментарий сотрудника, создавшего КП
- Внутреннуюю информацию о КП
- Поле для комментария
- Кнопку "Согласовать", которая завершает цикл создания КП
- Кнопку "Отправить на дороботку", которая возвращает КП на доработку сотруднику.

### 2.5.6. Отправка КП клиенту на почту

После согласования КП руководителем КП считается закрытым. Сотрудник получает возможность скачать документ, чтоб вручную отправить его клиенту, или он может сделать это через приложение. Сотрудник может указать тему письма и комментарий. После нажатия на кнопку "Отправить", письмо будет сформировано и отправлено клиенту на электронную почту.

### 2.5.7. Просмотр информации о товарах

### 2.5.8. Просмотр информации о клиентах

## 2.7. Админ панель для управления данными

## 2.8. Функционал интеграции с облачным хранилищем

## 2.9. Аналитика
